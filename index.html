<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RADIOHEAD | EUROPE 2025</title>
    <style>
        /* --- FONTS & BASE --- */
        @import url('https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Syne+Mono&family=Xanh+Mono&display=swap');

        :root {
            --rh-black: #050505;
            --rh-white: #e0e0e0;
            --rh-red: #ff3300;
            --rh-acid: #ccff00;
            --rh-dim: #333;
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: var(--rh-black);
            font-family: 'Share Tech Mono', monospace;
            color: var(--rh-white);
            cursor: crosshair;
        }

        /* --- BACKGROUND --- */
        #bg-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://rsrc.wasteheadquarters.com/OWU3NDY5YzBlZmM2YjY2OWFkMDc3YzJh/5_MADRID_RADIOHEAD_PHOTO_BY_ALEX_LAKE_TWOSHORTDAYS_9H0A1426.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.4;
            filter: contrast(140%) grayscale(100%) brightness(0.6);
            z-index: 0;
        }
        
        #noise {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            pointer-events: none;
            z-index: 1;
            opacity: 0.12;
            background: url('data:image/svg+xml;utf8,%3Csvg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"%3E%3Cfilter id="noiseFilter"%3E%3CfeTurbulence type="fractalNoise" baseFrequency="0.8" numOctaves="3" stitchTiles="stitch"/%3E%3C/filter%3E%3Crect width="100%25" height="100%25" filter="url(%23noiseFilter)"/%3E%3C/svg%3E');
        }

        /* --- TITLE --- */
        #main-title-img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 70vw;
            max-width: 800px;
            mix-blend-mode: exclusion;
            pointer-events: none;
            z-index: 2;
            opacity: 0.7;
        }

        /* --- SVG LINES LAYER --- */
        #connections-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 5;
            pointer-events: none;
        }

        path.connector {
            fill: none;
            stroke: var(--rh-white);
            stroke-width: 2; /* Increased thickness from 1 to 2 */
            stroke-dasharray: 2, 4; /* Dotted technical line */
            vector-effect: non-scaling-stroke;
            opacity: 0.6; /* Slight increase in opacity for visibility */
        }

        /* --- CITY NODES --- */
        .city-node {
            position: absolute;
            transform: translate(-50%, -50%);
            z-index: 50; 
            text-align: center;
            /* Allow clicking through the container to hit overlapping thumbnails if needed */
            pointer-events: none; 
        }

        /* The clickable text part */
        .city-label-group {
            position: relative;
            z-index: 200; /* ALWAYS ON TOP of thumbnails (rest state) */
            pointer-events: auto;
            display: inline-block;
        }

        .city-name {
            font-family: 'Xanh Mono', monospace;
            font-size: 2.5rem;
            text-transform: uppercase;
            font-weight: bold;
            color: var(--rh-white);
            background: var(--rh-black);
            padding: 4px 12px;
            border: 1px solid var(--rh-dim);
            transition: all 0.3s ease;
            box-shadow: 0 0 10px rgba(0,0,0,0.8);
        }

        .city-name:hover {
            background: var(--rh-white);
            color: var(--rh-black);
            border-color: var(--rh-white);
        }

        .city-date {
            font-family: 'Share Tech Mono', monospace;
            font-size: 1rem;
            color: var(--rh-acid);
            background: #000;
            padding: 2px 6px;
            position: absolute;
            top: -18px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
            border: 1px solid var(--rh-acid);
            z-index: 201; /* Above city name */
            letter-spacing: 1px;
        }

        /* --- THUMBNAIL SPIRAL --- */
        .spiral-container {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            pointer-events: none;
            z-index: 100;
        }

        .thumb {
            position: absolute;
            /* Size is now set dynamically via JavaScript */
            background-color: #222;
            background-size: cover;
            background-position: center;
            border: 1px solid #444;
            pointer-events: auto;
            cursor: pointer;
            transition: all 0.15s ease-out;
            filter: grayscale(100%) contrast(120%) brightness(0.8);
            opacity: 0.7;
            /* Center the anchor point for scaling */
            transform-origin: center center; 
        }

        /* Hover Interaction: The "Lens" Effect */
        .thumb:hover {
            width: 330px; /* Increased by 50% (220 * 1.5) */
            height: 186px; /* Increased by 50% (124 * 1.5) */
            z-index: 999 !important; /* Force to absolute top */
            filter: grayscale(0%) contrast(100%) brightness(1);
            opacity: 1;
            border: 2px solid var(--rh-acid);
            box-shadow: 0 10px 30px rgba(0,0,0,0.9);
            border-radius: 0;
        }

        /* Tooltip on hover */
        .thumb::after {
            content: attr(data-title);
            position: absolute;
            bottom: -20px;
            left: 0;
            background: var(--rh-acid);
            color: black;
            font-size: 10px;
            padding: 2px 4px;
            white-space: nowrap;
            display: none;
            font-weight: bold;
            box-shadow: 2px 2px 0 black;
        }
        .thumb:hover::after {
            display: block;
        }


        /* --- OVERLAY --- */
        #video-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.95);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            backdrop-filter: blur(8px);
        }

        #video-container {
            width: min(95vw, 160vh); /* (16/9) * 90vh = 160vh */
            height: auto; 
            max-width: 1400px; /* Absolute pixel cap for massive monitors */
            aspect-ratio: 16/9;
            border: 1px solid var(--rh-white);
            box-shadow: 0 0 50px rgba(255,255,255,0.1);
            background: #000;
        }
        
        /* Ensure the placeholder wrapper fills the container */
        #player-placeholder {
            width: 100%;
            height: 100%;
        }

        iframe { width: 100%; height: 100%; border: none; }

        #close-btn {
            margin-top: 25px;
            font-family: 'Share Tech Mono', monospace;
            font-size: 1.2rem;
            background: transparent;
            color: var(--rh-white);
            border: 1px solid var(--rh-white);
            padding: 10px 40px;
            cursor: pointer;
            text-transform: uppercase;
            transition: 0.2s;
        }
        #close-btn:hover { background: var(--rh-white); color: black; }

        /* --- UI ELEMENTS --- */
        .glitch-footer {
            position: absolute;
            bottom: 20px;
            left: 20px;
            font-size: 11px;
            color: #555;
            z-index: 5;
            max-width: 300px;
            line-height: 1.4;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .city-name { font-size: 1.5rem; }
            /* Scaled hover size for mobile: 160px * 1.5 = 240px; 90px * 1.5 = 135px */
            .thumb:hover { width: 240px; height: 135px; } 
            
            #video-container {
                width: min(95vw, 142.22vh); 
                max-width: none; 
            }
        }

    </style>
</head>
<body>

    <div id="bg-layer"></div>
    <div id="noise"></div>
    <img id="main-title-img" src="https://radiohead.com/b1b.jpg" alt="Radiohead Art">

    <svg id="connections-layer">
        <path id="tour-path" class="connector" d="" />
    </svg>

    <div id="app-container"></div>

    <div class="glitch-footer">
        [SYSTEM_STATUS: ONLINE]<br>
        ARCHIVE_SIZE: (Curated Videos Only)<br>
        MODE: SPIRAL_DISTRIBUTION
    </div>

    <div id="video-overlay">
        <div id="video-container">
            <div id="player-placeholder"></div>
        </div>
        <button id="close-btn">DISCONNECT</button>
    </div>

    <script>
        // --- CONFIG & DATA (EASY TO CURATE) ---
        
        /**
         * CORE_TOUR_DATA is the main list you should edit.
         * Add your confirmed videos to the 'realVideos' array for each city.
         * The format is: { id: "YOUTUBE_ID", title: "Video Title" }
         * Only manually entered videos will be displayed, no filler content.
         */
        const CORE_TOUR_DATA = [
            {
                city: "Madrid", 
                dates: "NOV 04-08",
                realVideos: [
                    { id: "6dBywGE_w-c", title: "Everything In Its Right Place" }, 
                    { id: "-37QCDxOcak", title: "Full Show N2" }, 
                    { id: "BD86XmHAOQI", title: "Let Down" }
                ]
            },
            {
                city: "Bologna", 
                dates: "NOV 14-18",
                realVideos: [
                    { id: "1kIPZKFqtdY", title: "Radiohead - Full Live (@ Bologna 15/11/2025)" },
                    { id: "uTMtoCLTcQA", title: "Radiohead Bologna 17th Nov 2025 full show HD" },
                    { id: "avNFiJIYuXs", title: "Radiohead full live Bologna 14 novembre 2025 multicam" },
                    { id: "KSP5jbAxMOs", title: "Radiohead Bologna 18th Nov 2025 full show in 4K" },
                    { id: "tY5o5rOfGzc", title: "Radiohead - Full Live (live in Bologna at Unipol arena 18/11/2025) 4K" },
                    { id: "Ap29YqzTAEw", title: "Radiohead concert Bologna 18 Nov 2025 - 10min taste of heaven!" },
                    { id: "17ezEAkou7k", title: "Paranoid Android - Radiohead // Bologna 15/11/2025 Unipol Arena" },
                    { id: "HQSOhfFLn94", title: "Radiohead - How to Disappear Completely, Live in Bologna 17/11/2025 Night 3" },
                    { id: "K2Pkih2bg9g", title: "Radiohead - Planet Telex (live in Bologna, 14.11.2025)" },
                    { id: "-ThAOXum6vY", title: "Radiohead - Jigsaw Falling Into Place, Live in Bologna 18/11/2025 Night 4" },
                    { id: "J3g_STgPzDw", title: "optimistic - radiohead bologna 2025" },
                    { id: "HoSiMYrXIsU", title: "Radiohead - Just, Live in Bologna 17/11/2025 Night 3" },
                    { id: "KTzc4eGE60g", title: "Radiohead / 2+2=5 - live a Bologna 14/11/2025" },
                    { id: "ps4tn0X_DAU", title: "RADIOHEAD On Fire! (Live Bologna 11-17-2025)" },
                ]
            },
            {
                city: "London", 
                dates: "NOV 21-25",
                realVideos: [
                    { id: "vOa--Dhu11M", title: "Street Spirit" }, 
                    { id: "8nTFjVm9sTQ", title: "Paranoid Android" }
                ]
            },
            {
                city: "Copenhagen", 
                dates: "DEC 01-05",
                realVideos: [
                    { id: "TTAU7lLDZYU", title: "Daydreaming" }
                ]
            },
            {
                city: "Berlin", 
                dates: "DEC 08-12",
                realVideos: [
                    { id: "yI2dS240608", title: "Weird Fishes" }
                ]
            }
        ];


        // --- LOGIC FUNCTIONS (DO NOT EDIT BELOW) ---

        /**
         * Returns only the manually entered videos. Simulation logic has been removed.
         * @param {Array} realVideos - The curated list of videos.
         * @returns {Array} The curated list of videos only.
         */
        function generateVideos(realVideos) {
            // Only return the real videos, simulation logic has been removed
            return realVideos;
        }

        function randomInt(min, max) { return Math.floor(Math.random() * (max - min + 1) + min); }

        // Process CORE_TOUR_DATA (no simulation/filler is added now)
        const tourData = CORE_TOUR_DATA.map(data => ({
            ...data,
            videos: generateVideos(data.realVideos)
        }));

        // --- THUMBNAIL SIZE CONSTANTS ---
        // Sizes increased by 50% from (50/30 min) to (100/60 max)
        const MIN_WIDTH = 75;  // 50 * 1.5
        const MIN_HEIGHT = 45; // 30 * 1.5
        const MAX_WIDTH = 150; // 100 * 1.5
        const MAX_HEIGHT = 90; // 60 * 1.5
        const ASPECT_RATIO = MIN_WIDTH / MIN_HEIGHT; 

        // --- LAYOUT ENGINE ---

        const appContainer = document.getElementById('app-container');
        const svgPath = document.getElementById('tour-path');
        
        // Using "Zones" to keep cities somewhat apart
        const zones = [
            { x: [15, 25], y: [15, 25] }, // Top Left
            { x: [45, 55], y: [45, 55] }, // Center
            { x: [75, 85], y: [15, 25] }, // Top Right
            { x: [15, 25], y: [65, 75] }, // Bottom Left
            { x: [75, 85], y: [65, 75] }  // Bottom Right
        ];
        
        const cityPositions = tourData.map((data, index) => {
            const zone = zones[index % zones.length];
            return {
                ...data,
                x: randomInt(zone.x[0], zone.x[1]), 
                y: randomInt(zone.y[0], zone.y[1])
            };
        });

        // --- RENDER ---
        cityPositions.forEach((city, index) => {
            // 1. Create City Container
            const node = document.createElement('div');
            node.className = 'city-node';
            node.style.left = `${city.x}%`;
            node.style.top = `${city.y}%`;
            
            // 2. Add Label (Name + Date)
            const label = document.createElement('div');
            label.className = 'city-label-group';
            label.innerHTML = `
                <div class="city-date">${city.dates}</div>
                <div class="city-name">${city.city}</div>
            `;
            node.appendChild(label);

            // 3. Create Spiral Container
            const spiral = document.createElement('div');
            spiral.className = 'spiral-container';
            
            // 4. GENERATE SPIRAL
            // Golden Angle approximation
            const goldenAngle = 137.508; 
            // How far apart thumbnails are
            const spread = 16; 
            // Start distance from center (to clear the text)
            const minRadius = 65; 

            city.videos.forEach((video, vIndex) => {
                const thumb = document.createElement('div');
                thumb.className = 'thumb';

                // --- RANDOM SIZE CALCULATION ---
                // Generate a random factor between 0.0 and 1.0
                const randomFactor = Math.random(); 
                
                // Calculate random width between MIN and MAX
                const randomWidth = MIN_WIDTH + (MAX_WIDTH - MIN_WIDTH) * randomFactor;
                
                // Calculate corresponding height to maintain aspect ratio
                const randomHeight = randomWidth / ASPECT_RATIO;
                
                // Apply random size
                thumb.style.width = `${randomWidth}px`;
                thumb.style.height = `${randomHeight}px`;
                // ---------------------------------
                
                // Spiral Math
                // r = c * sqrt(n)
                const angle = vIndex * goldenAngle * (Math.PI / 180);
                const radius = minRadius + (spread * Math.sqrt(vIndex)); // Tighter packing
                
                const tx = Math.cos(angle) * radius;
                const ty = Math.sin(angle) * radius;

                thumb.style.transform = `translate(${tx}px, ${ty}px) rotate(${randomInt(-5, 5)}deg)`;
                
                // Data
                thumb.setAttribute('data-title', video.title);
                thumb.style.backgroundImage = `url('https://img.youtube.com/vi/${video.id}/hqdefault.jpg')`;

                // Interaction
                thumb.onclick = (e) => {
                    e.stopPropagation();
                    openOverlay(video.id);
                };

                spiral.appendChild(thumb);
            });

            node.appendChild(spiral);
            appContainer.appendChild(node);
        });

        // --- CONNECTORS ---
        function drawLines() {
            let pathD = "";
            const width = window.innerWidth;
            const height = window.innerHeight;

            cityPositions.forEach((city, i) => {
                const cx = (city.x / 100) * width;
                const cy = (city.y / 100) * height;

                if (i === 0) {
                    pathD += `M ${cx} ${cy} `;
                } else {
                    const prevX = (cityPositions[i-1].x / 100) * width;
                    const prevY = (cityPositions[i-1].y / 100) * height;
                    
                    // Jagged / Glitchy Line connection
                    pathD += `L ${prevX} ${prevY} L ${cx} ${cy} `;
                }
            });
            svgPath.setAttribute('d', pathD);
        }

        // --- OVERLAY LOGIC ---
        const overlay = document.getElementById('video-overlay');
        const playerContainer = document.getElementById('player-placeholder');
        
        function openOverlay(videoId) {
            overlay.style.display = 'flex';
            playerContainer.innerHTML = `<iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1&theme=dark&color=white" allow="autoplay; encrypted-media" allowfullscreen></iframe>`;
        }

        document.getElementById('close-btn').onclick = () => {
            overlay.style.display = 'none';
            playerContainer.innerHTML = '';
        };

        // --- INIT ---
        drawLines();
        window.addEventListener('resize', drawLines);

    </script>
</body>
</html>
